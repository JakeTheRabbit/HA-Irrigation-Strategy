# ================================================================
# CROP STEERING SYSTEM CONFIGURATION
# ================================================================
# Edit this file with your Home Assistant entity IDs, then restart HA
# This file configures both AppDaemon automation AND Home Assistant integration entities

# ================================================================
# IRRIGATION HARDWARE (REQUIRED)
# ================================================================
# Main pump and water line controls
PUMP_SWITCH=switch.f1_irrigation_pump_master_switch
MAIN_LINE_SWITCH=switch.espoe_irrigation_relay_1_2
WASTE_SWITCH=

# Zone valve controls
ZONE_1_SWITCH=switch.f1_irrigation_relays_relay_1
ZONE_2_SWITCH=switch.f1_irrigation_relays_relay_2
ZONE_3_SWITCH=switch.f1_irrigation_relays_relay_3

# ================================================================
# ZONE SENSORS (REQUIRED FOR AI)
# ================================================================
# Zone 1 sensors
ZONE_1_VWC_FRONT=sensor.vwc_r1_front
ZONE_1_VWC_BACK=sensor.vwc_r1_back
ZONE_1_EC_FRONT=sensor.ec_r1_front
ZONE_1_EC_BACK=sensor.ec_r1_back

# Zone 2 sensors
ZONE_2_VWC_FRONT=sensor.vwc_r2_front
ZONE_2_VWC_BACK=sensor.vwc_r2_back
ZONE_2_EC_FRONT=sensor.ec_r2_front
ZONE_2_EC_BACK=sensor.ec_r2_back

# Zone 3 sensors
ZONE_3_VWC_FRONT=sensor.vwc_r3_front
ZONE_3_VWC_BACK=sensor.vwc_r3_back
ZONE_3_EC_FRONT=sensor.ec_r3_front
ZONE_3_EC_BACK=sensor.ec_r3_back

# ================================================================
# LIGHTING SYSTEM (Optional - for automatic phase timing)
# ================================================================
LIGHT_ENTITY=light.f1_light_group
LIGHTS_ON_TIME=input_datetime.f1_lights_on_time
LIGHTS_OFF_TIME=input_datetime.f1_lights_off_time

# ================================================================
# ENVIRONMENTAL SENSORS (Optional - for analytics)
# ================================================================
TEMPERATURE_SENSOR=sensor.f1_scd41_back_right_temperature
HUMIDITY_SENSOR=sensor.f1_scd41_back_right_humidity
VPD_SENSOR=sensor.middle_leaf_vpd
WATER_LEVEL_SENSOR=sensor.tank_percentage_full

# ================================================================
# CROP PROFILE SETTINGS
# ================================================================
# Options: Cannabis_Athena, Cannabis_Hybrid, Cannabis_Indica, Cannabis_Sativa, Tomato, Lettuce
DEFAULT_CROP_TYPE=Cannabis_Athena
# Options: Vegetative, Generative
DEFAULT_STEERING_MODE=Vegetative

# ================================================================
# SYSTEM FEATURES
# ================================================================
ENABLE_EC_STACKING=false
ENABLE_ANALYTICS=true
ENABLE_ML_FEATURES=false
ENABLE_MQTT_MONITORING=false

# ================================================================
# SUBSTRATE PROPERTIES (CRITICAL - MEASURE ACCURATELY)
# ================================================================
# Container volume in liters (e.g., 10.0 for 10L pots)
SUBSTRATE_VOLUME_LITERS=3
# Dripper flow rate in liters per hour (measure: time to fill 1L)
DRIPPER_FLOW_RATE_LPH=2.4
# Maximum water capacity (%) - saturate substrate, drain 30min, measure VWC
SUBSTRATE_FIELD_CAPACITY=70
# Maximum safe EC level (mS/cm) - Athena method uses 8-9
SUBSTRATE_MAX_EC=9.0

# ================================================================
# IRRIGATION PARAMETERS (Fine-tune via dashboard later)
# ================================================================

# P0 PHASE - Morning Dryback
P0_VEG_DRYBACK_TARGET=50
P0_GEN_DRYBACK_TARGET=40
P0_MIN_WAIT_TIME=30
P0_MAX_WAIT_TIME=120

# P1 PHASE - Ramp-Up
P1_INITIAL_SHOT_SIZE_PERCENT=2.0
P1_SHOT_SIZE_INCREMENT=0.5
P1_MAX_SHOT_SIZE_PERCENT=10.0
P1_TIME_BETWEEN_SHOTS=15
P1_TARGET_VWC=65
P1_MAX_SHOTS=10
P1_MIN_SHOTS=3

# P2 PHASE - Maintenance
P2_SHOT_SIZE_PERCENT=2
P2_VWC_THRESHOLD=60
P2_EC_HIGH_THRESHOLD=1.2
P2_EC_LOW_THRESHOLD=0.8

# P3 PHASE - Pre-Lights-Off
P3_VEG_LAST_IRRIGATION=120
P3_GEN_LAST_IRRIGATION=180
P3_EMERGENCY_VWC_THRESHOLD=40
P3_EMERGENCY_SHOT_SIZE_PERCENT=2.0

# ================================================================
# EC TARGETS (Athena Method - 3.0 baseline, up to 6.0 generative)
# ================================================================

# Vegetative EC targets (structure building)
EC_TARGET_VEG_P0=3.0
EC_TARGET_VEG_P1=3.0
EC_TARGET_VEG_P2=3.2
EC_TARGET_VEG_P3=3.0

# Generative EC targets (flowering/fruiting)
EC_TARGET_GEN_P0=4.0
EC_TARGET_GEN_P1=5.0
EC_TARGET_GEN_P2=6.0
EC_TARGET_GEN_P3=4.5


NOTIFICATION_SERVICE=notify.mobile_app_s23ultra

# ================================================================
# EXISTING HOME ASSISTANT ENTITIES (Map to your existing entities)
# ================================================================
# Map your existing HA entities to the crop steering system

# EXISTING SWITCHES & HELPERS (Set these to your existing entities)
TANK_FILLING_SWITCH=switch.tank_filling
SYSTEM_OVERRIDE_SWITCH=input_boolean.irrigation_system_override
AUTO_IRRIGATION_SWITCH=input_boolean.auto_irrigation_enabled
DEBUG_MODE_SWITCH=input_boolean.crop_steering_debug

# EXISTING NUMBER HELPERS (Create these helpers in HA if they don't exist)
# Go to Settings → Devices & Services → Helpers → Create Helper → Number
SUBSTRATE_VOLUME_HELPER=input_number.substrate_volume_liters
DRIPPER_FLOW_RATE_HELPER=input_number.dripper_flow_rate_lph
DRIPPERS_PER_PLANT_HELPER=input_number.drippers_per_plant
FIELD_CAPACITY_HELPER=input_number.field_capacity_percent
MAX_EC_HELPER=input_number.max_ec_limit

# DRYBACK TARGET HELPERS
VEG_DRYBACK_TARGET_HELPER=input_number.veg_dryback_target
GEN_DRYBACK_TARGET_HELPER=input_number.gen_dryback_target

# PHASE TARGET HELPERS  
P1_TARGET_VWC_HELPER=input_number.p1_target_vwc
P2_VWC_THRESHOLD_HELPER=input_number.p2_vwc_threshold

# P0 PHASE HELPERS
P0_MIN_WAIT_HELPER=input_number.p0_min_wait_minutes
P0_MAX_WAIT_HELPER=input_number.p0_max_wait_minutes
P0_DRYBACK_DROP_HELPER=input_number.p0_dryback_drop_percent

# P1 PHASE HELPERS
P1_INITIAL_SHOT_HELPER=input_number.p1_initial_shot_size
P1_SHOT_INCREMENT_HELPER=input_number.p1_shot_increment
P1_MAX_SHOT_HELPER=input_number.p1_max_shot_size
P1_TIME_BETWEEN_HELPER=input_number.p1_time_between_shots
P1_MAX_SHOTS_HELPER=input_number.p1_max_shots
P1_MIN_SHOTS_HELPER=input_number.p1_min_shots

# P2 PHASE HELPERS
P2_SHOT_SIZE_HELPER=input_number.p2_shot_size
P2_EC_HIGH_HELPER=input_number.p2_ec_high_threshold
P2_EC_LOW_HELPER=input_number.p2_ec_low_threshold

# P3 PHASE HELPERS
P3_VEG_LAST_IRRIGATION_HELPER=input_number.p3_veg_last_irrigation
P3_GEN_LAST_IRRIGATION_HELPER=input_number.p3_gen_last_irrigation
P3_EMERGENCY_VWC_HELPER=input_number.p3_emergency_vwc_threshold
P3_EMERGENCY_SHOT_HELPER=input_number.p3_emergency_shot_size

# EC TARGET HELPERS (Athena Methodology)
EC_TARGET_FLUSH_HELPER=input_number.ec_target_flush
EC_TARGET_VEG_P0_HELPER=input_number.ec_target_veg_p0
EC_TARGET_VEG_P1_HELPER=input_number.ec_target_veg_p1
EC_TARGET_VEG_P2_HELPER=input_number.ec_target_veg_p2
EC_TARGET_VEG_P3_HELPER=input_number.ec_target_veg_p3
EC_TARGET_GEN_P0_HELPER=input_number.ec_target_gen_p0
EC_TARGET_GEN_P1_HELPER=input_number.ec_target_gen_p1
EC_TARGET_GEN_P2_HELPER=input_number.ec_target_gen_p2
EC_TARGET_GEN_P3_HELPER=input_number.ec_target_gen_p3

# LIGHT SCHEDULE HELPERS
LIGHTS_ON_HOUR_HELPER=input_number.lights_on_hour
LIGHTS_OFF_HOUR_HELPER=input_number.lights_off_hour

# ZONE-SPECIFIC HELPERS (Create for each zone)
ZONE_1_PLANT_COUNT_HELPER=input_number.zone_1_plant_count
ZONE_1_MAX_DAILY_HELPER=input_number.zone_1_max_daily_volume
ZONE_1_SHOT_MULTIPLIER_HELPER=input_number.zone_1_shot_multiplier
ZONE_2_PLANT_COUNT_HELPER=input_number.zone_2_plant_count
ZONE_2_MAX_DAILY_HELPER=input_number.zone_2_max_daily_volume
ZONE_2_SHOT_MULTIPLIER_HELPER=input_number.zone_2_shot_multiplier
ZONE_3_PLANT_COUNT_HELPER=input_number.zone_3_plant_count
ZONE_3_MAX_DAILY_HELPER=input_number.zone_3_max_daily_volume
ZONE_3_SHOT_MULTIPLIER_HELPER=input_number.zone_3_shot_multiplier

# EXISTING SELECT HELPERS (Create these in HA if they don't exist)
# Go to Settings → Devices & Services → Helpers → Create Helper → Dropdown
CROP_TYPE_HELPER=input_select.crop_type
GROWTH_STAGE_HELPER=input_select.growth_stage
STEERING_MODE_HELPER=input_select.steering_mode
IRRIGATION_PHASE_HELPER=input_select.irrigation_phase

# ZONE GROUPING HELPERS
ZONE_1_GROUP_HELPER=input_select.zone_1_group
ZONE_1_PRIORITY_HELPER=input_select.zone_1_priority
ZONE_1_CROP_PROFILE_HELPER=input_select.zone_1_crop_profile
ZONE_2_GROUP_HELPER=input_select.zone_2_group
ZONE_2_PRIORITY_HELPER=input_select.zone_2_priority
ZONE_2_CROP_PROFILE_HELPER=input_select.zone_2_crop_profile
ZONE_3_GROUP_HELPER=input_select.zone_3_group
ZONE_3_PRIORITY_HELPER=input_select.zone_3_priority
ZONE_3_CROP_PROFILE_HELPER=input_select.zone_3_crop_profile

# EXISTING DATETIME HELPERS (Map to your existing time inputs)
LIGHTS_ON_TIME_HELPER=input_datetime.lights_on_time
LIGHTS_OFF_TIME_HELPER=input_datetime.lights_off_time

# ================================================================
# HELPER CREATION GUIDE
# ================================================================
# If the helpers above don't exist, create them in Home Assistant:
# 1. Go to Settings → Devices & Services → Helpers
# 2. Click "Create Helper"
# 3. Choose the helper type (Number, Dropdown, Toggle, etc.)
# 4. Set the name and configuration
# 5. Update the entity IDs above to match what you created