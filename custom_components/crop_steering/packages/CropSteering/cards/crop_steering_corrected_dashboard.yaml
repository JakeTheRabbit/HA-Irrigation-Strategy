# Corrected Crop Steering Dashboard
# Only uses entities that definitely exist in your system
# Based on your feedback about entity availability

type: vertical-stack
cards:
  - type: grid
    columns: 2
    square: false
    cards:
      - type: entities
        title: üå± Crop Steering Status
        show_header_toggle: false
        entities:
          # Only include entities we know exist
          - entity: select.crop_steering_steering_mode
            name: Steering Mode
            icon: mdi:steering
          - entity: select.crop_steering_irrigation_phase
            name: Manual Phase Override
            icon: mdi:water-circle
          - type: divider
          - entity: switch.crop_steering_system_enabled
            name: System Enabled
            icon: mdi:power
          - entity: switch.crop_steering_ec_stacking_enabled
            name: EC Stacking Mode
            icon: mdi:chemistry-bottle
            
      - type: entities
        title: üìä Physical Sensor Readings
        show_header_toggle: false
        entities:
          # Use your actual physical sensors only
          - entity: sensor.vwc_r1_front
            name: Zone 1 VWC Front (%)
            icon: mdi:water-percent
          - entity: sensor.vwc_r1_back
            name: Zone 1 VWC Back (%)
            icon: mdi:water-percent
          - entity: sensor.ec_r1_front
            name: Zone 1 EC Front (mS/cm)
            icon: mdi:lightning-bolt
          - entity: sensor.ec_r1_back
            name: Zone 1 EC Back (mS/cm)
            icon: mdi:lightning-bolt

  - type: entities
    title: üè† Zone Management
    show_header_toggle: false
    entities:
      - entity: switch.crop_steering_zone_1_enabled
        name: Zone 1 Active
        icon: mdi:water-pump
      - entity: switch.crop_steering_zone_2_enabled
        name: Zone 2 Active
        icon: mdi:water-pump
      - entity: switch.crop_steering_zone_3_enabled
        name: Zone 3 Active
        icon: mdi:water-pump

  - type: grid
    columns: 3
    square: false
    cards:
      - type: entities
        title: üìä Zone 1 Physical Sensors
        show_header_toggle: false
        entities:
          - entity: sensor.vwc_r1_front
            name: VWC Front (%)
          - entity: sensor.vwc_r1_back
            name: VWC Back (%)
          - entity: sensor.ec_r1_front
            name: EC Front (mS/cm)
          - entity: sensor.ec_r1_back
            name: EC Back (mS/cm)
            
      - type: entities
        title: üìä Zone 2 Physical Sensors
        show_header_toggle: false
        entities:
          - entity: sensor.vwc_r2_front
            name: VWC Front (%)
          - entity: sensor.vwc_r2_back
            name: VWC Back (%)
          - entity: sensor.ec_r2_front
            name: EC Front (mS/cm)
          - entity: sensor.ec_r2_back
            name: EC Back (mS/cm)
            
      - type: entities
        title: üìä Zone 3 Physical Sensors
        show_header_toggle: false
        entities:
          - entity: sensor.vwc_r3_front
            name: VWC Front (%)
          - entity: sensor.vwc_r3_back
            name: VWC Back (%)
          - entity: sensor.ec_r3_front
            name: EC Front (mS/cm)
          - entity: sensor.ec_r3_back
            name: EC Back (mS/cm)

  - type: grid
    columns: 2
    square: false
    cards:
      - type: entities
        title: ‚öôÔ∏è Integration Settings (if available)
        show_header_toggle: false
        entities:
          - entity: select.crop_steering_crop_type
            name: Crop Type
          - entity: number.crop_steering_substrate_volume
            name: Substrate Volume (L)
          - entity: number.crop_steering_dripper_flow_rate
            name: Flow Rate (L/hr)
          - entity: number.crop_steering_field_capacity
            name: Field Capacity (%)
            
      - type: entities
        title: üéØ Dryback Settings (if available)
        show_header_toggle: false
        entities:
          - entity: number.crop_steering_p1_target_vwc
            name: P1 Target VWC (%)
          - entity: number.crop_steering_p2_vwc_threshold
            name: P2 VWC Threshold (%)

  - type: entities
    title: üîß Physical Hardware Control
    show_header_toggle: false
    entities:
      - type: section
        label: Main System Controls
      - entity: switch.f1_irrigation_pump_master_switch
        name: Master Pump
        icon: mdi:power-plug
      - entity: switch.espoe_irrigation_relay_1_2
        name: Main Line Valve
        icon: mdi:pipe
      - entity: switch.espoe_irrigation_relay_1_4
        name: Mains Water Valve
        icon: mdi:pipe-valve
      - entity: switch.espoe_irrigation_relay_2_4
        name: Manifold Valve
        icon: mdi:pipe-valve
      - type: section
        label: Zone Valves
      - entity: switch.f1_irrigation_relays_relay_1
        name: Zone 1 Valve
        icon: mdi:sprinkler
      - entity: switch.f1_irrigation_relays_relay_2
        name: Zone 2 Valve
        icon: mdi:sprinkler
      - entity: switch.f1_irrigation_relays_relay_3
        name: Zone 3 Valve
        icon: mdi:sprinkler
      - type: section
        label: Utility Controls
      - entity: switch.waste_valve
        name: Waste Valve
        icon: mdi:pipe-valve
      - entity: switch.espoe_irrigation_relay_1_1
        name: Tank Return Valve
        icon: mdi:water-pump
      - entity: switch.f1_irrigation_relays_relay_4
        name: Waste/Hose Valve
        icon: mdi:pipe-valve
      - entity: automation.f1_irrigation_irrigate_5_minutes_every_45_minutes
        name: Legacy Irrigation Timer
        icon: mdi:timer
        
grid_options:
  columns: 36
  rows: auto