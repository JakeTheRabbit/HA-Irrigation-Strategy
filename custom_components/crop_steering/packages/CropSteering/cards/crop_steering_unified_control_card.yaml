# Crop Steering Unified Control Dashboard
# Complete control interface for the crop steering system
# Updated for Integration Entity Names

type: vertical-stack
cards:
  # System Status & Quick Controls
  - type: grid
    columns: 2
    square: false
    cards:
      - type: entities
        title: üå± System Status & Control
        show_header_toggle: false
        entities:
          - entity: select.crop_steering_irrigation_phase
            name: Current Phase
          - entity: select.crop_steering_steering_mode
            name: Steering Mode
          - entity: sensor.cs_irrigation_status
            name: Irrigation Status
          - type: divider
          - entity: switch.crop_steering_zone_1_enabled
            name: Zone 1 Active
          - entity: switch.crop_steering_zone_2_enabled
            name: Zone 2 Active
          - entity: switch.crop_steering_zone_3_enabled
            name: Zone 3 Active
          - type: divider
          - entity: input_datetime.cs_lights_on_time
            name: Lights On Time
          - entity: input_datetime.cs_lights_off_time
            name: Lights Off Time

      - type: entities
        title: üìä Current Readings
        show_header_toggle: false
        entities:
          - entity: sensor.cs_configured_avg_vwc
            name: Average VWC
          - entity: sensor.cs_configured_avg_ec
            name: Average EC
          - entity: sensor.cs_ec_ratio
            name: EC Ratio
          - type: divider
          - entity: sensor.crop_steering_irrigation_efficiency
            name: Efficiency
          - entity: sensor.crop_steering_water_usage_daily
            name: Daily Water Usage
          - entity: sensor.crop_steering_dryback_percentage
            name: Current Dryback

  # Zone Details
  - type: grid
    columns: 3
    square: false
    cards:
      - type: entities
        title: üè† Zone 1
        show_header_toggle: false
        entities:
          - entity: sensor.crop_steering_vwc_zone_1
            name: VWC
          - entity: sensor.crop_steering_ec_zone_1
            name: EC
          - entity: switch.crop_steering_zone_1_enabled
            name: Enabled
          - entity: sensor.cs_zone_1_peak_vwc
            name: Peak VWC
          - entity: sensor.cs_zone_1_valley_vwc
            name: Valley VWC

      - type: entities
        title: üè† Zone 2
        show_header_toggle: false
        entities:
          - entity: sensor.cs_zone_2_vwc
            name: VWC
          - entity: sensor.cs_zone_2_ec
            name: EC
          - entity: switch.crop_steering_zone_2_enabled
            name: Enabled
          - entity: sensor.cs_zone_2_peak_vwc
            name: Peak VWC
          - entity: sensor.cs_zone_2_valley_vwc
            name: Valley VWC

      - type: entities
        title: üè† Zone 3
        show_header_toggle: false
        entities:
          - entity: sensor.cs_zone_3_vwc
            name: VWC
          - entity: sensor.cs_zone_3_ec
            name: EC
          - entity: switch.crop_steering_zone_3_enabled
            name: Enabled
          - entity: sensor.cs_zone_3_peak_vwc
            name: Peak VWC
          - entity: sensor.cs_zone_3_valley_vwc
            name: Valley VWC

  # System Configuration
  - type: entities
    title: ‚öôÔ∏è System Configuration
    show_header_toggle: false
    entities:
      - entity: select.crop_steering_crop_type
        name: Crop Type
      - entity: number.crop_steering_substrate_volume
        name: Substrate Volume (L)
      - entity: number.crop_steering_dripper_flow_rate
        name: Dripper Flow Rate (L/hr)
      - entity: number.crop_steering_field_capacity
        name: Field Capacity (%)
      - entity: number.crop_steering_max_ec
        name: Maximum EC (mS/cm)
      - type: divider
      - entity: switch.crop_steering_ec_stacking_enabled
        name: EC Stacking
      - entity: switch.crop_steering_system_enabled
        name: System Enabled

  # Quick Parameter Adjustment
  - type: grid
    columns: 2
    square: false
    cards:
      - type: entities
        title: üéØ Dryback Targets
        show_header_toggle: false
        entities:
          - entity: number.crop_steering_veg_dryback_target
            name: Vegetative Target (%)
          - entity: number.crop_steering_gen_dryback_target
            name: Generative Target (%)
          - entity: number.crop_steering_p1_target_vwc
            name: P1 Target VWC (%)
          - entity: number.crop_steering_p2_vwc_threshold
            name: P2 VWC Threshold (%)

      - type: entities
        title: ‚ö° EC Configuration
        show_header_toggle: false
        entities:
          - entity: input_number.cs_ec_target_veg_p2
            name: Veg P2 Target (mS/cm)
          - entity: input_number.cs_ec_target_gen_p2
            name: Gen P2 Target (mS/cm)
          - entity: input_number.cs_p2_ec_high_threshold
            name: EC High Ratio
          - entity: input_number.cs_p2_ec_low_threshold
            name: EC Low Ratio